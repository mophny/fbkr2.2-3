<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <title>–ö–æ–Ω—Ç–∞–∫—Ç—ã</title>
    <link rel="stylesheet" href="../styles/styles.css">
</head>

<body>
    <a class="skip-link" href="#main">–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É</a>
    <div class="page-container">
        <header>
            <p>–õ—É–Ω—è–∫–æ–≤ –ú–∏—Ö–∞–∏–ª –ò–≥–æ—Ä–µ–≤–∏—á</p>
        </header>
        <nav class="nav" aria-label="–û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è">
            <ul class="nav-list">
                <li class="nav-item"><a class="nav-link" href="../index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
                <li class="nav-item"><a class="nav-link" href="projects.html">–ü—Ä–æ–µ–∫—Ç—ã</a></li>
                <li class="nav-item"><a class="nav-link" href="diary.html">–î–Ω–µ–≤–Ω–∏–∫</a></li>
                <li class="nav-item"><a class="nav-link" href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
            </ul>
        </nav>

        <main class="content" id="main">
            <h1>–°–≤—è–∂–∏—Ç–µ—Å—å —Å–æ –º–Ω–æ–π</h1>
            <article class="contacts-header">
                <form id="ContactForm" novalidate>
                    <fieldset>
                        <legend class="sr-only">–§–æ—Ä–º–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏</legend>

                        <div class="form-control">
                            <label for="username">–ò–º—è:</label>
                            <input type="text" id="username" name="username" required autocomplete="name"
                                inputmode="text" aria-required="true" aria-describedby="username-error">
                            <!-- –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –æ—à–∏–±–∫–∏ —Ä—è–¥–æ–º —Å –ø–æ–ª–µ–º, –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —Å–∫—Ä–∏–Ω—Ä–∏–¥–µ—Ä—É -->
                            <div id="username-error" class="error-text" role="alert" aria-live="assertive"></div>
                        </div>

                        <div class="form-control">
                            <label for="email">Email:</label>
                            <input type="text" id="email" name="email" required autocomplete="email" inputmode="email"
                                aria-required="true" aria-describedby="email-error">
                            <div id="email-error" class="error-text" role="alert" aria-live="assertive"></div>
                        </div>

                        <div class="form-control">
                            <label for="message">–°–æ–æ–±—â–µ–Ω–∏–µ:</label>
                            <textarea id="message" name="message" rows="6" required aria-required="true"
                                aria-describedby="message-error"></textarea>
                            <div id="message-error" class="error-text" role="alert" aria-live="assertive"></div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" id="submit" name="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                            <button type="reset" id="reset" name="reset" aria-label="–û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É">–û—á–∏—Å—Ç–∏—Ç—å</button>
                        </div>
                    </fieldset>
                </form>
            </article>

            <h2>–ö–æ–Ω—Ç–∞–∫—Ç—ã:</h2>
            <p>
                üìß lunyakov.m.i@edu.mirea.ru
            </p>
            <p>
                üì± GitHub: mophny
            </p>
            <p>
                üìç –ú–æ—Å–∫–≤–∞, –†–æ—Å—Å–∏—è
            </p>

        </main>
        <footer>
            <p>¬© 2025 –ö–æ–Ω—Ç–∞–∫—Ç—ã</p>
        </footer>
    </div>
    <script>
        const form = document.getElementById('ContactForm');
        const emailInput = document.getElementById('email');
        const usernameInput = document.getElementById('username');
        const messageInput = document.getElementById('message');

        emailInput.addEventListener('input', validateEmail);
        usernameInput.addEventListener('input', validateUsername);
        messageInput && messageInput.addEventListener('input', validateMessage);

        form.addEventListener('submit', function (e) {

            if (!validateUsername() | !validateEmail() | !validateMessage()) {
                e.preventDefault();

                const firstInvalid = form.querySelector('[aria-invalid="true"]');
                if (firstInvalid) firstInvalid.focus();
            }
        });

        function validateUsername() {
            const usernameRegex = /[A-–Ø–∞-—è–Å—ë]+/;
            if (usernameRegex.test(usernameInput.value.trim())) {
                removeError(usernameInput);
                return true;
            } else {
                showError(usernameInput, "–ò–º—è –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ñ–æ—Ä–º–∞—Ç—É. –ü—Ä–∏–º–µ—Ä: –ò–≤–∞–Ω");
                return false;
            }
        }

        function validateEmail() {
            const emailRegex = /^[A-Za-z0-9._%+-]{2,}@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/i;
            if (emailRegex.test(emailInput.value.trim())) {
                removeError(emailInput);
                return true;
            } else {
                showError(emailInput, "Email –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ñ–æ—Ä–º–∞—Ç—É. –ü—Ä–∏–º–µ—Ä: ivanov@mail.ru");
                return false;
            }
        }

        function validateMessage() {
            if (!messageInput) return true;
            if (messageInput.value.trim().length >= 5) {
                removeError(messageInput);
                return true;
            } else {
                showError(messageInput, "–°–æ–æ–±—â–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–æ–µ (–º–∏–Ω. 5 —Å–∏–º–≤–æ–ª–æ–≤).");
                return false;
            }
        }

        function showError(input, message) {
            const id = input.id + '-error';
            const errorElement = document.getElementById(id);
            if (errorElement) {
                errorElement.textContent = message;

            } else {

                const el = document.createElement('div');
                el.className = 'error-text';
                el.id = id;
                el.setAttribute('role', 'alert');
                el.setAttribute('aria-live', 'assertive');
                el.textContent = message;
                input.insertAdjacentElement('afterend', el);
            }
            input.setAttribute('aria-invalid', 'true');
            input.classList.remove('input-valid');
            input.classList.add('input-invalid');
            input.setAttribute('aria-describedby', id);
        }

        function removeError(input) {
            const id = input.id + '-error';
            const errorElement = document.getElementById(id);
            if (errorElement) {
                errorElement.textContent = '';
            }
            input.removeAttribute('aria-invalid');
            input.classList.remove('input-invalid');
            input.classList.add('input-valid');
            input.setAttribute("aria-describedby", input.id + "-error");
        }
    </script>
</body>

</html>